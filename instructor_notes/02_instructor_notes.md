# Session 02 Instructor Notes

## To Have Up on Desktop

1. Session 02 Instructor Notes -
2. Webpage of roster pictures on UMEG -
3. Roster sheet with presence - https://docs.google.com/spreadsheets/d/1HKt0Dr6YajcRXLu-0IpWRWBMb4C9J-detlI0TE45jh8/edit#gid=1136077922
3. Course Canvas Page - https://umd.instructure.com/courses/1288268/modules
4. Slides https://docs.google.com/presentation/d/1YD3RISEks2ledhJwmX8MPBgRu-VQE45exmckLEbIorg/edit#slide=id.g94540b6654_0_97
8. GitHub Desktop
9. R Studio with in_class_02_lecture_demo.Rmd to show during wapo opioids
10. A separate R Studio session with in_class_02.Rmd loaded and empty environment
11. Email to check at regular intervals at beginning.
12. Phone to check for "can't get in texts"


## Openers

[START RECORDING]
* I'm recording.
* Reminders to mute your microphone.  
* And unless you've sent me a note explaining that you don't want to keep your video on during class, I'd ask that you turn it on now.  I won't force you to do it, just a reminder that it helps me teach.  
* And also a reminder to keep the chat up, cause I'll be asking you questions.

[PULL UP SLIDES]
https://docs.google.com/presentation/d/1YD3RISEks2ledhJwmX8MPBgRu-VQE45exmckLEbIorg/edit#slide=id.p

So, in class today we're going to
* Review WaPo Opioid Story
* Looking for documentation
* Review of data acquisition project (Major Assignment 1)
* Break
* In Class Exercise to set up lab.  As we go through it, I'll ask for any issues you all had with submitting stuff to GitHub or working with Markdown or R studio, stuff you didn't understand.
* What's due this week.

[ASK FOR QUESTIONS - anything burning that you want to discuss today that I haven't mentioned.]

## First Half Class

### Washington Post Opioids

##### Q: Where did the data come from?

It's maintained by the DEA.  It's the way the DEA tracks shipments of controlled substances.   Automation of Reports and Consolidated Orders System (ARCOS).  In its original form, it tracks thousands of controlled substances, documenting the movement of each batch of pills from the manufacturer, to a distributor to the person who sells or dispenses it, typically a pharmacy.

https://www.deadiversion.usdoj.gov/arcos/index.html

##### Q: Was it designed by the government to help journalists tell stories about shipments of controlled substances?

No, it was not.  It was designed by the government to look for suspicious purchases and movements of controlled, dangerous substances.  They fought the release of it for years.  Journalists only got access to it by filing a lawsuit, intervening in a lawsuit by state and local governments against opioid manufacturers.

Even today, you can't just like go to the DEA Website and download it. We're going to use cleaned up versions released by the Post.

A LOT of data is public.  But often, to tell the story you want to tell, you have to use reporting and public records laws to get the good stuff.

You'll get some practice in this class.

##### Q: What are some key facts generated by data analysis?   

You all killed it on this.

[PULL UP in_class_02_lecture_demo.Rmd]

In the raw data, each row is a shipment of a unique unit of pills that has the date, manufacturer (labeler), distributor (reporter), end pharmacy (buyer name, city and state), drug type, number of pills, info about the type of pill and.

This is a small slice of it, I'm not showing you all the columns in this raw data set, which has a lot more.   
This is just for Mingo WV. 45K unique shipments from 2006 to 2014.    


* A: A total of 76 billion opioids shipped between 2006 and 2012.
  * Q: How did they calculate this, just in English, don't worry about what the code might look like?
  * Discussion: Each transaction has the number of pills in that, so if we add all those up, we can answer this question.
* A: The total number of pills increased "about 51 percent from 8.4 billion in 2006 to 12.6 billion in 2012.
  * Q: How did they calculate this, just in English?  
  * Discussion: Each transaction has the number of pills in it, plus the date.  If we create a total for each year -- add up all the 2006 shipments together and all the 2012 shipments together -- we will get two totals. We can use a percent change formula to calculate the increase.
* A: Just six companies distributed 75 percent of the pills during this period: McKesson Corp., Walgreens, Cardinal Health, AmerisourceBergen, CVS and Walmart, according to an analysis of the database by The Washington Post.
  * Q: How did they calculate this, just in English?  
  * Discussion: Each transaction has the number of pills in it and the distributor. We know the total number of pills shipped from the first question, it's 76 billion.  If we calculate the total number of pills shipped by each distributor, and divide it by the total of 76 billion, we get the percentage share for each company.  And if we add together the top six, we get 75 percent.
* A: Rural areas were hit particularly hard: Norton, Va., with 306 pills per person; Martinsville, Va., with 242; Mingo County, W.Va., with 203; and Perry County, Ky., with 175.
  * Q: How did they calculate this, just in English?
  * Discussion: The data includes pills in each shipment, and the pharmacy it was sent to, including the address.  By totaling up all of the pills sent to each city, and then dividing by population (which they got from another dataset), they were able to calculate the per person rate for each city.  Then they rearranged the data from highest to lowest.  

A few takeaways here:
* Our ability to ask specific questions is limited by our data. We couldn't ask, for example, any questions about the gender of people who received the pills using this data, because there's nothing in here about patients who got the pills.  And, for example, we could only answer the "rural areas hit hard" question because we went out and got another data set -- population.
* There are common types of questions we ask over and over again -- how have things changed over time, who has been affected the most or the least, who is most responsible (share). But the best questions are often specific questions we know to ask because some reporting has guided us there.  
* There's a process we're going to follow when attempting to answer questions. This is a key skill to cultivate.   
  * One: Come up with a loose question we want to know the answer to. How many total pills were shipped by all manufacturers between 2006 and 2012?
  * Two: Figure out out if we can ask the question with the data we have, and get a bit more specific about the process to answer that question.  Let's take the ARCOS database and add together all of the pills in each shipment between 2006 and 2012.
  * Three: Let's "operationalize" our question, take it from our rough English question and put it into a language our data understands. And by that I mean, write code.   



##### Q: How do we know what fields mean?

We've been operating on the assumption that "dosage_unit" is a proxy for total pills.

How do we know that?

The answer: we looked at the documentation!

We read the documentation, also often called a data dictionary or a record layout.  Any data set you work with, I want you to ask for this. Or find it. If you canâ€™t find it, call the people you got the data from and ask for it.  Assumptions lead to corrections.  

Two examples of documentation here.

The first is the one the post journalists who got this data and processed it for release to the public made.  

We can look at this and see what dosage_unit stands for: "DEA calculated field indicating number of pills, patches or lozenges, among others, shipped as part of the transaction."

It also talks about limitations of the data. For example, "Drug_name"
"Name of drug corresponding with DRUG_CODE. Post data contains only oxycodone and hydrocodone, though full data set contains drugs including codeine, morphine and fentanyl, among others."


The second is the much more complicated one -- the ARCOS registrant guide -- that the post used to make this cleaned up version ARCOS registrant guide.

This was designed for the government and companies.  It's much more complicated.

##### Q: Who did it?    

* Some of you picked out Andrew Ba Tran, Steven Rich and Aaron Williams.  But the truth is everyone plays a role.  Understanding the data is critical, and reporting plays into it. All that context and sourcing helps understand how to use the data, what questions to ask, and how to make sense of it.  Analysis is not separate from reporting. It's part of it.

### DATA PROJECT

Now I'm going to introduce you to the data acquisition project, which is worth 10 percent of your grade.

[BREAK]

#### IN CLASS EXERCISE

NOTE: THIS TOOK FOREVER and we didn't get past loading the tidyverse.  This is better as a lesson where we just load tidyverse and help peeople debug the next time we do this. If we end early, we end early

SAVE ALL THE other stuff in in class assignment 2 for the lab.

Go to Modules Page
Go to live class assignemnt
CLick link to download zip file
Drag it to Desktop
Unpack it
Drag it into github folder
Create a new folder called in_class
Drag student_download into in_class
Rename it in_class_02
Go to GitHub desktop and pull > comitt changes > push origin
Open R studio
Open In_class_02.Rmd
Two options here. If you have a big enough screen, you can switch back and forth and run code as I go. IF NOT, just watch me and there will be time at the end to do it on your own.
At the end, I'll send you to breakdout rooms to work together
